<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Request</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            min-height: 100vh;
            background: linear-gradient(to bottom right, #0f172a, #581c87, #0f172a);
        }
        
        .backdrop-blur-sm {
            backdrop-filter: blur(4px);
        }
        
        .bg-white\/5 {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .bg-white\/10 {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .border-white\/10 {
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Custom select and input styles */
        select, input, textarea {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            width: 100%;
        }
        
        select:focus, input:focus, textarea:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.5);
            border-color: rgba(6, 182, 212, 0.5);
        }
        
        /* Custom button styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
            border: none;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-primary {
            background: linear-gradient(to right, #06b6d4, #7e22ce);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(to right, #0891b2, #6b21a8);
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .btn-outline:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Custom card styles */
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.5rem;
            backdrop-filter: blur(4px);
        }
        
        .card-header {
            padding: 1.5rem 1.5rem 0;
        }
        
        .card-content {
            padding: 1.5rem;
        }
        
        /* Radio group styles */
        .radio-option {
            transition: all 0.2s ease;
            cursor: pointer;
            padding: 1rem;
            border-radius: 0.375rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .radio-option.selected {
            border-color: #06b6d4;
            background-color: rgba(6, 182, 212, 0.2);
        }
        
        .hidden {
            display: none !important;
        }
        
        .space-y-6 > * + * {
            margin-top: 1.5rem;
        }
        
        /* Animation for step transitions */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Badge styles */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            border: 1px solid;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: capitalize;
        }
        
        .badge-urgent {
            background-color: rgba(239, 68, 68, 0.2);
            color: #f87171;
            border-color: rgba(239, 68, 68, 0.3);
        }
        
        .badge-normal {
            background-color: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
            border-color: rgba(245, 158, 11, 0.3);
        }
        
        .badge-low {
            background-color: rgba(34, 197, 94, 0.2);
            color: #4ade80;
            border-color: rgba(34, 197, 94, 0.3);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="border-b border-white/10 backdrop-blur-sm">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center space-x-4">
                <a href="/" class="text-gray-300 hover:text-white flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Back to Home
                </a>
                <div>
                    <h1 class="text-xl font-bold text-white">Request Service</h1>
                    <p class="text-sm text-gray-300">Book your service request</p>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <!-- Progress Steps -->
            <div class="flex items-center justify-center mb-8" id="progress-steps">
                <!-- Progress steps will be dynamically generated -->
            </div>

            <!-- Step 1: Service Details -->
            <div class="card fade-in" id="step1">
                <div class="card-header">
                    <h2 class="text-white text-2xl font-bold">Service Details</h2>
                    <p class="text-gray-300">Tell us about the issue you're experiencing</p>
                </div>
                <div class="card-content space-y-6">
                    <div class="space-y-2">
                        <label for="serviceType" class="text-white block">Service Type</label>
                        <select id="serviceType" class="select">
                            <option value="">Select service type</option>
                            <option value="repair">Repair</option>
                            <option value="maintenance">Maintenance</option>
                            <option value="installation">Installation</option>
                            <option value="inspection">Inspection</option>
                        </select>
                    </div>

                    <div class="space-y-2">
                        <label for="issue" class="text-white block">Describe the Issue</label>
                        <textarea id="issue" class="textarea min-h-[100px]" placeholder="Please describe the problem you're experiencing..."></textarea>
                    </div>

                    <div class="space-y-3">
                        <label class="text-white block">Urgency Level</label>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="urgency-options">
                            <div class="radio-option" onclick="selectUrgency('low')">
                                <div class="font-medium text-white">Low Priority</div>
                                <div class="text-sm text-gray-400">Within 1–2 days</div>
                            </div>
                            <div class="radio-option" onclick="selectUrgency('normal')">
                                <div class="font-medium text-white">Normal</div>
                                <div class="text-sm text-gray-400">Same day</div>
                            </div>
                            <div class="radio-option" onclick="selectUrgency('urgent')">
                                <div class="font-medium text-white">Urgent</div>
                                <div class="text-sm text-gray-400">In 1–2 hours</div>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-end">
                        <button id="step1-next" class="btn btn-primary" disabled>
                            Next Step
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 2: Scheduling -->
            <div class="card hidden" id="step2">
                <div class="card-header">
                    <h2 class="text-white text-2xl font-bold" id="step2-title">Scheduling & Contact</h2>
                    <p class="text-gray-300" id="step2-description">Choose your preferred time and provide contact details</p>
                </div>
                <div class="card-content space-y-6" id="scheduling-content">
                    <!-- Content will be dynamically populated -->
                </div>

                <div class="card-content flex justify-between pt-0">
                    <button class="btn btn-outline" onclick="goToStep(1)">
                        Back
                    </button>
                    <button id="step2-next" class="btn btn-primary" disabled>
                        Review Order
                    </button>
                </div>
            </div>

            <!-- Step 3: Review -->
            <div class="card hidden" id="step3">
                <div class="card-header">
                    <h2 class="text-white text-2xl font-bold">Review & Confirm</h2>
                    <p class="text-gray-300">Please review your request details before confirming</p>
                </div>
                <div class="card-content space-y-6" id="review-content">
                    <!-- Content will be dynamically populated -->
                </div>

                <div class="card-content flex justify-between pt-0">
                    <button class="btn btn-outline" onclick="goToStep(2)">
                        Back
                    </button>
                    <button id="confirm-btn" class="btn btn-primary" onclick="submitForm()">
                        Confirm Booking
                        <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Step 4: Success -->
            <div class="card hidden text-center" id="step4">
                <div class="p-12">
                    <div class="w-20 h-20 bg-gradient-to-r from-green-400 to-emerald-400 rounded-full flex items-center justify-center mb-6 mx-auto">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h2 class="text-3xl font-bold text-white mb-4">Booking Confirmed!</h2>
                    <p class="text-gray-300 text-lg mb-6">
                        Your request has been submitted. We'll match you with the best available technician.
                    </p>

                    <div class="bg-white/5 rounded-lg p-6 border border-white/10 mb-6" id="booking-details">
                        <!-- Booking details will be populated here -->
                    </div>

                    <div class="space-y-4">
                        <div class="flex items-center justify-center text-gray-300" id="confirmation-message">
                            <!-- Confirmation message will be populated here -->
                        </div>

                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <a href="/dashboard" class="btn btn-primary">
                                View Dashboard
                            </a>
                            <a href="/services" class="btn btn-outline">
                                Book Another Service
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State management
        let currentStep = 1;
        let selectedDate = new Date();
        let formData = {
            serviceType: "",
            issue: "",
            urgency: "normal",
            preferredTime: "",
            arrivalWindow: "",
            address: "",
            phone: "",
            additionalNotes: "",
            agreedToTerms: false
        };

        const timeSlots = [
            "9:00 AM - 11:00 AM",
            "11:00 AM - 1:00 PM",
            "1:00 PM - 3:00 PM",
            "3:00 PM - 5:00 PM",
            "5:00 PM - 7:00 PM",
            "7:00 PM - 9:00 PM"
        ];

        const urgentWindows = ["Within 60 minutes", "60–90 minutes", "90–120 minutes"];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeProgressSteps();
            setupEventListeners();
        });

        function initializeProgressSteps() {
            const progressContainer = document.getElementById('progress-steps');
            progressContainer.innerHTML = '';
            
            [1, 2, 3].forEach((stepNumber, index) => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'flex items-center';
                
                const stepCircle = document.createElement('div');
                stepCircle.className = `w-10 h-10 rounded-full flex items-center justify-center ${
                    currentStep >= stepNumber 
                    ? 'bg-gradient-to-r from-cyan-500 to-purple-500 text-white' 
                    : 'bg-white/10 text-gray-400'
                }`;
                stepCircle.textContent = stepNumber;
                
                stepDiv.appendChild(stepCircle);
                
                if (index < 2) {
                    const connector = document.createElement('div');
                    connector.className = `w-16 h-1 mx-2 ${
                        currentStep > stepNumber 
                        ? 'bg-gradient-to-r from-cyan-500 to-purple-500' 
                        : 'bg-white/10'
                    }`;
                    stepDiv.appendChild(connector);
                }
                
                progressContainer.appendChild(stepDiv);
            });
        }

        function setupEventListeners() {
            // Step 1 form elements
            document.getElementById('serviceType').addEventListener('change', function() {
                formData.serviceType = this.value;
                validateStep1();
            });

            document.getElementById('issue').addEventListener('input', function() {
                formData.issue = this.value;
                validateStep1();
            });
        }

        function selectUrgency(urgency) {
            formData.urgency = urgency;
            
            // Update visual selection
            document.querySelectorAll('.radio-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            document.querySelector(`.radio-option[data-value="${urgency}"]`).classList.add('selected');
            
            // Enable the next button if all conditions are met
            validateStep1();
        }

        function validateStep1() {
            const isValid = formData.serviceType && formData.issue && formData.urgency;
            document.getElementById('step1-next').disabled = !isValid;
        }

        function goToStep(step) {
            if (step === 2 && !validateStep1()) {
                alert('Please fill in all required fields');
                return;
            }
            
            if (step === 3) {
                // Validate step 2
                let isValid = false;
                if (formData.urgency === "urgent") {
                    isValid = !!(formData.arrivalWindow && formData.address && formData.phone);
                } else {
                    isValid = !!(formData.preferredTime && formData.address && formData.phone);
                }
                
                if (!isValid) {
                    alert('Please fill in all required fields');
                    return;
                }
                
                updateReviewContent();
            }
            
            // Hide all steps
            document.querySelectorAll('[id^="step"]').forEach(el => {
                if (el.id !== 'progress-steps') {
                    el.classList.add('hidden');
                }
            });
            
            // Show current step
            currentStep = step;
            const currentStepEl = document.getElementById(`step${currentStep}`);
            currentStepEl.classList.remove('hidden');
            currentStepEl.classList.add('fade-in');
            
            // Update progress indicator
            initializeProgressSteps();
        }

        function updateSchedulingContent() {
            const content = document.getElementById('scheduling-content');
            const title = document.getElementById('step2-title');
            const description = document.getElementById('step2-description');
            
             if (formData.urgency === 'urgent') {
                title.textContent = 'ASAP Scheduling & Contact';
                description.textContent = 'Pick an arrival window within the next 1–2 hours and share your contact details.';
                
                content.innerHTML = `
                    <div class="rounded-lg border border-white/10 bg-white/5 p-4 text-sm text-gray-300">
                        <div class="flex items-start">
                            <svg class="mr-2 h-4 w-4 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 极速赛车开奖号码查询官网0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                            <p>
                                <span class="font-semibold text-white">Urgent:</span> We'll dispatch the nearest technician in
                                <span class="mx-1 font-medium text-white">1–2 hours</极速赛车开奖号码查询官网span>. Pick an arrival window and keep your
                                phone available.
                            </p>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6 mt-6">
                        <div class="space-y-2">
                            <label class="text-white">Arrival Window</label>
                            <select class="select" onchange="updateFormData('arrivalWindow', this.value)">
                                <option value="">Select arrival window</option>
                                ${urgentWindows.map(w => `<option value="${w}">${w}</option>`).join('')}
                            </select>
                        </div>

                        <div class="space-y-2">
                            <label class="text-white">Phone Number</label>
                            <input type="tel" class="input" placeholder="+1 (555) 123-4567" oninput="updateFormData('phone', this.value)">
                        </div>
                    </div>

                    <div class="space-y-2 mt-6">
                        <label class="text-white">Service Address</label>
                        <textarea class="textarea" placeholder="Enter your complete address..." oninput="updateFormData('address', this.value)"></textarea>
                    </div>

                    <div class="space-y-2">
                        <label class="text-white">Additional Notes (Optional)</label>
                        <textarea class="textarea" placeholder="Gate code, parking info, special instructions..." oninput="updateFormData('additionalNotes', this.value)"></textarea>
                    </div>
                `;
            } else {
                title.textContent = formData.urgency === 'normal' ? 'Same‑Day Scheduling & Contact' : 'Flexible Scheduling & Contact';
                description.textContent = formData.urgency === 'normal' 
                    ? 'Choose today\'s time slot and provide your contact details.'
                    : 'Choose a slot within the next 2 days and provide your contact details.';
                
                content.innerHTML = `
                    <div class="rounded-lg border border-white/10 bg-white/5 p-4 text-sm text-gray-300">
                        <div class="flex items-start">
                            <svg class="mr-2 h-4 w-4 ${formData.urgency === 'normal' ? 'text-yellow-400' : 'text-green-400'}" fill="none" stroke="currentColor" viewBox="0 0 极速赛车开奖号码查询官网24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4极速赛车开奖号码查询官网h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                            <p>
                                <span class="font-semibold text-white">${formData.urgency === 'normal' ? 'Same Day' : 'Low Priority'}:</span> 
                                ${formData.urgency === 'normal' 
                                    ? 'Choose a slot for today. We\'ll match you to a nearby pro for the selected window.'
                                    : 'Flexible scheduling within 1–2 days. Enjoy a small discount for flexible timing.'
                                }
                            </p>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6 mt-6">
                        <div class="space-y-2">
                            <label class="text-white">Date</label>
                            <button class="btn btn-outline w-full justify-start text-left font-normal" onclick="selectDate()">
                                <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                ${formatDate(selectedDate)}
                            </button>
                        </div>

                        <div class="space极速赛车开奖号码查询官网-y-2">
                            <label class="text-white">Preferred Time</label>
                            <select class="select" onchange="updateFormData('preferredTime', this.value)">
                                <option value="">Select time slot</option>
                                ${timeSlots.map(slot => `<option value="${slot}">${slot}</option>`).join('')}
                            </select>
                        </div>
                    </div>

                    <div class="space-y-2 mt-6">
                        <label class="text-white">Service Address</label>
                        <textarea class="textarea" placeholder="Enter your complete address..." oninput="updateFormData('address', this.value)"></textarea>
                    </div>

                    <div class="space-y-2">
                        <label class="text-white">Phone Number</label>
                        <input type="tel" class="input" placeholder="+1 (555) 123-4567" oninput="updateFormData('phone', this.value)">
                    </div>

                    <div class="space-y-2">
                        <label class="text-white">Additional Notes (Optional)</label>
                        <textarea class="textarea" placeholder="Any additional information..." oninput="updateFormData('additionalNotes', this.value)"></textarea>
                    </div>
                `;
            }
            
            // Add event listeners for validation on step 2
            setTimeout(() => {
                const inputs = content.querySelectorAll('select, input, textarea');
                inputs.forEach(input => {
                    if (input.tagName === 'SELECT') {
                        input.addEventListener('change', validateStep2);
                    } else {
                        input.addEventListener('input', validateStep2);
                    }
                });
            }, 100);
        }

        function updateFormData(field, value) {
            formData[field] = value;
            validateStep2();
        }

        function validateStep2() {
            let isValid = false;
            
            if (formData.urgency === "urgent") {
                isValid = !!(formData.arrivalWindow && formData.address && formData.phone);
            } else {
                isValid = !!(formData.preferredTime && formData.address && formData.phone);
            }
            
            document.getElementById('step2-next').disabled = !isValid;
        }

        function updateReviewContent() {
            const content = document.getElementById('review-content');
            const pricing = calculatePricing();
            
            content.innerHTML = `
                <!-- Service Summary -->
                <div class="bg-white/5 rounded-lg p-4 border border-white/10">
                    <h3 class="text-white font-bold mb-4">Service Summary</h3>
                    <div class="grid md:grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="text-gray-400">Service Type:</span>
                            <span class="text-white ml-2 capitalize">${formData.serviceType}</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-gray-400">Urgency:</span>
                            <span class="badge ml-2 ${getUrgencyBadgeClass()}">${formData.urgency}</span>
                        </div>
                        ${formData.urgency === "urgent" ? `
                            <div>
                                <span class="text-gray-400">Arrival Window:</span>
                                <span class="text-white ml-2">${formData.arrivalWindow}</span>
                            </div>
                        ` : `
                            <div>
                                <span class="text-gray-400">Date & Time:</span>
                                <span class="text-white ml-2">
                                    ${formatDate(selectedDate)} at ${formData.preferredTime}
                                </span>
                            </div>
                        `}
                    </div>
                    <div class="mt-4">
                        <span class="text-gray-400">Issue Description:</span>
                        <p class="text-white mt-1">${formData.issue}</p>
                    </div>
                </div>

                <!-- Contact & Address -->
                <div class="bg-white/5 rounded-lg p-4 border border-white/10">
                    <h3 class="text-white font-bold mb-4">Contact & Address</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-center">
                            <svg class="w-4 h-4 text-gray-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                            </svg>
                            <span class="text-white">${formData.phone}</span>
                        </div>
                        <div class="flex items-start">
                            <svg class="w-4 h-4 text-gray-400 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <span class="text-white">${formData.address}</span>
                        </div>
                    </div>
                </div>

                <!-- Pricing -->
                <div class="bg-white/5 rounded-lg p-4 border border-white/10">
                    <h3 class="text-white font-bold mb-4">Pricing</极速赛车开奖号码查询官网3>
                    <div class="space-y-2">
                        ${pricing.items.map(i => `
                            <div class="flex justify-between">
                                <span class="text-gray-400">${i.label}</span>
                                <span class="${i.amount < 0 ? 'text-green-300' : 'text-white'}">
                                    ${i.amount < 0 ? '-' : ''}$${Math.abs(i.amount).toFixed(2)}
                                </span>
                            </div>
                        `).join('')}
                        <div class="border-t border-white/10 pt-2 mt-2">
                            <div class="flex justify-between font-bold">
                                <span class="text-white">Total Estimate</span>
                                <span class="text-white">$${pricing.total.toFixed(2)}</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-400 mt-2">* Final cost may vary based on actual work required.</p>
                </div>

                <!-- Terms Agreement -->
                <div class="flex items-start space-x-2">
                    <input type="checkbox" id="terms" onchange="formData.agreedToTerms = this.checked">
                    <label for="terms" class="text-sm text-gray-300 leading-relaxed cursor-pointer">
                        I agree to the <a href="/terms" class="text-cyan-400 hover:text-cyan-300">Terms of Service</a> and 
                        <a href="/privacy" class="text-cyan-400 hover:text-cyan-300">Privacy Policy</a>.
                        I understand that the final cost may vary based on the actual service requirements.
                    </label>
                </div>
            `;
        }

        function calculatePricing() {
            const items = [
                { label: "Service Call Fee", amount: 49 },
                { label: "Diagnostic Fee", amount: 25 },
            ];

            if (formData.urgency === "urgent") items.push({ label: "Urgent Service Fee", amount: 30 });
            if (formData.urgency === "low") items.push({ label: "Flex Scheduling Discount", amount: -10 });

            const total = items.reduce((sum, i) => sum + i.amount, 0);
            return { items, total };
        }

        function getUrgencyBadgeClass() {
            return formData.urgency === "urgent" ? "badge-urgent" :
                   formData.urgency === "normal" ? "badge-normal" :
                   "badge-low";
        }

        function selectDate() {
            // Simple date selection for demo
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            const dayAfter = new Date(today);
            dayAfter.setDate(dayAfter.getDate() + 2);
            
            const dateStr = prompt("Select a date (Today, Tomorrow, or Day After Tomorrow):");
            if (dateStr === "Today") {
                selectedDate = today;
                alert('Today has been selected!');
            } else if (dateStr === "Tomorrow") {
                selectedDate = tomorrow;
                alert('Tomorrow has been selected!');
            极速赛车开奖号码查询官网} else if (dateStr === "Day After Tomorrow") {
                selectedDate = dayAfter;
                alert('Day After Tomorrow has been selected!');
            }
            
            updateSchedulingContent();
            validateStep2();
        }

        function formatDate(date) {
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        function submitForm() {
            if (!formData.agreedToTerms) {
                alert('Please agree to the terms and conditions');
                return;
            }

            const button = document.getElementById('confirm-btn');
            button.disabled = true;
            button.innerHTML = 'Processing...';

            // Simulate API call
            setTimeout(() => {
                goToStep(4);
                showSuccessScreen();
            }, 1200);
        }

        function showSuccessScreen() {
            const bookingDetails = document.getElementById('booking-details');
            const confirmationMessage = document.getElementById('confirmation-message');

            bookingDetails.innerHTML = `
                <h3 class="text-white font-bold mb-4">Booking Reference</h3>
                <div class="text-2xl font-mono text-cyan-400 mb-4">#SF-2024-001234</div>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                    ${formData.urgency === "urgent" ? `
                        <div>
                            <span class="text-gray-400">Arrival Window:</span>
                            <div class="text-white">${formData.arrivalWindow}</div>
                        </div>
                    ` : `
                        <div>
                            <span class="text-gray-400">Service Date:</span>
                            <div class="text-white">${formatDate(selectedDate)}</div>
                        </div>
                        <div>
                            <span class="text-gray-400">Time Slot:</span>
                            <div class="text-white">${formData.preferredTime}</div>
                        </div>
                    `}
                </div>
            `;

            confirmationMessage.innerHTML = `
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                </svg>
                ${formData.urgency === "urgent" ? "You'll receive a confirmation call within 10 minutes." :
                  formData.urgency === "normal" ? "You'll receive a confirmation call within 30 minutes." :
                  "We'll confirm your flexible slot within a few hours."}
            `;
        }

        // Set initial urgency selection
        window.onload = function() {
            selectUrgency('normal');
        };
    </script>
</body>
</html>